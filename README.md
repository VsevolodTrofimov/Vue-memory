# Vue-memory
Тестовое на стажировку СКБ Контур.
[Условие задания](https://docs.google.com/document/d/1mGdzJfIA9TTFPbMs8etZjPWQ_VSlIV7RWc4kcJXXTQI/edit)


## Использование
Предполагается, что у вас уже установлен `nodejs` версии 8 или выше и `npm`

**OS X \ Unix**
```bash
NODE_ENV=development npm install
```

**Windows (Power shell)**
```bash
($env:NODE_ENV="development") -and (npm install)
```

### Режим разработки
```bash
npm run dev
```

### Юнит тесты
```bash
npm test
```

### Сборка
```bash
npm run build
```

### Сборка + содержимое бандла и размеры его частей
```bash
npm run analyze
```

### Запуск сервера для cобранного приложения
```bash
# Если не сделали раньше
npm run build
```

```bash
npm run serve
```

*Там просто статический сервер, но отдает он "production" версию приложеня (отсутствие частей нужных только для разработки(warnings, source maps), добавлено сжатие, хеш в имени бандла(для кеш очевидности)).*

### E2E тесты
```bash
# Если сервер еще не запущен
npm run build && npm run serve
```

В другом терминале \ окне powershell \ окне cmd:
```bash
npm run e2e
```

Там один `.spec` файл ввиду линейности user flow в приложении.

### Coverage
После завершения unit тестов UI с coverage можно открыть в
`/coverage/lcov-report/index.html/`

## Почему Vue, Vuex, babel и webpack
### Vue
**Фреймворк** используется т.к. работать с DOM вручную можно 
либо непроизводительно,
либо велосипедя себе фреймворк,
либо тратя на это много времени + очень вербозно => менее понятный код.

Основанный **VDOM** фреймворк т.к. удобнее всего разносить отображение и логику, 
декларативно описывать интерфейс приложения.

**Vue** т.к. 
- Встроенное регулирование анимаций для mount \ unmount компонентов внутри
- Весит сильно меньше чем React
- Не абстрагирует платформу(браузер) на 100%, в отиличе от React
- Позволяет использовать события (на не коллбеки как свойства) в жизненном цикле компонентов
- Single file components
- Vue mixins на мой взгляд — более удобный способ пробрасывать компонентам глобальные объекты 
(интернациональзация \ управление состоянием), чем вездесущие [HOC](https://reactjs.org/docs/higher-order-components.html) (подход типичный для React like фреймворков)

### Vuex
- Предпочинаю разностить логику и интерфейс
- FLUX
- Стандартный стейт менеджмент для Vue => хорошая интеграция

### Webpack
Возможность запускать компиляцию Sass, Vue single file components, babel, uglify автоматически.
Бандлинг, хеши бандла \ чанков, анализ бандла, es6 modules, не надо писать watch вручную.

### Babel
Nodejs (окружение юнит тестов) \ некоторые браузеры поддержвают не все, что я использовал.

Несмотря на то, что это приложение в production никогда не пойдет, Babel дает 
почти моментальное расширение списка поддерживаемых браузеров \ версий браузеров.
Без `babel-polyfill` это еще и почти ничего не стоит с точки зрения веса бандла \ производительности.


## Почему Сypress и Jest
 - Приятный API обоих
 - Cнепшот тесты Jest


## Почему не сделано ...
### Спрайты
Это приложение в production никогда не пойдет, а спрайты занимают много времени.
Бесполезно, если есть HTTP2 server push \ latency низкий.

### Звук
В приложенном к заданию архиве звуков не было.
Это приложение в production никогда не пойдет.

Выглядело бы это как как:
```js
const someActionSound = new Audio(config.audio.urls.default.someAction)
/* canPlayType checks */

someActionSound.play()
```

### test coverage на core/Button и core/Header компонентах
[Баг](https://github.com/vuejs/vue-jest/issues/32) в vue-jest.

### SVG карт \ баннеров
Долго.
Это приложение в production никогда не пойдет.
Обводить картинки — едва ли будничная задача frontend разработчика.

### Code splitting
Весь бандл после gzip весит 30Kb.

### Тесты на default state
Там нет значимых данных.

### Не работает через `file://`
Тогда надо трансформировать \ указывать отностительно пути к картинкам \ бандлу.
Для SPA которые чаще всего URL независимые (т.к. роутинг на клиенте) 
запросы к статике не от корня — потенциальный источник багов.

## Спорные моменты
### Start game повторяет запрос
Предзагрузка картинок нужна интерфейсу, а не логике игры.

### Много регрессионных тестов
Написать компонент быстрее, чем написать behaviour тест для него.

### Наличие gameConfig
- Удобнее тестить
- Удобнее при дебаге
- Геймдизайнеры любят регулировать числа, поэтому лучше вынести конфигурацию, чем искать их потом по коду.


### Отсутствие авоматических проверок стиля написания кода \ prettier
Мой стиль весьма постоянен, когда пишу в одиночку могу позоволить себе не заниматься настройкой
eslint \ prettier.


## Eще
[vuex-sanpshot](https://github.com/VsevolodTrofimov/vuex-snapshot), используемый в этом проекте.

Мой аккаунт на [github](https://github.com/VsevolodTrofimov).
